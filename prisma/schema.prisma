generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model BagianUnitKerja {
  id                 String               @id @default(uuid()) @db.Uuid
  nama               String               @unique
  createdBy          String               @map("created_by")
  createdAt          DateTime             @default(now()) @map("created_at")
  updatedBy          String               @map("updated_by")
  updatedAt          DateTime             @updatedAt @map("updated_at")
  strukturOrganisasi StrukturOrganisasi[]

  @@map("bag_uker")
}

model Dosen {
  id                     String   @id @default(uuid()) @db.Uuid
  pegawaiId              String   @unique @map("pegawai_id") @db.VarChar(18)
  scopusId               String?  @map("scopus_id") @db.VarChar(11)
  wosId                  String?  @map("wos_id") @db.VarChar(13)
  gsId                   String?  @map("gs_id") @db.VarChar(15)
  orcidId                String?  @map("orcid_id") @db.VarChar(22)
  nidn                   String?  @db.VarChar(10)
  sintaId                String?  @map("sinta_id") @db.VarChar(7)
  prodiId                String?  @map("prodi_id") @db.Uuid
  createdBy              String   @map("created_by")
  createdAt              DateTime @default(now()) @map("created_at")
  updatedBy              String   @map("updated_by")
  updatedAt              DateTime @updatedAt @map("updated_at")
  serdosBidangStudi      String?  @map("serdos_bidang_studi")
  serdosNoRegistrasi     String?  @map("serdos_nomor_registrasi")
  serdosSkSertifikat     String?  @map("serdos_sk_sertifikasi")
  serdosTahunSertifikasi Int?     @map("serdos_tahun_sertifikasi") @db.SmallInt
  pegawai                Pegawai  @relation(fields: [pegawaiId], references: [id])
  prodi                  Prodi?   @relation(fields: [prodiId], references: [id])

  @@map("dosen")
}

model Fakultas {
  id        String   @id @db.VarChar(5)
  nama      String   @unique
  createdBy String   @map("created_by")
  createdAt DateTime @default(now()) @map("created_at")
  updatedBy String   @map("updated_by")
  updatedAt DateTime @updatedAt @map("updated_at")
  prodi     Prodi[]

  @@map("fakultas")
}

model GradeRemun {
  id                 String               @id @db.VarChar(3)
  remun              Int
  createdBy          String               @map("created_by")
  createdAt          DateTime             @default(now()) @map("created_at")
  updatedBy          String               @map("updated_by")
  updatedAt          DateTime             @updatedAt @map("updated_at")
  strukturJabatan    StrukturJabatan[]
  strukturOrganisasi StrukturOrganisasi[]

  @@map("grade_remun")
}

model Jabatan {
  id           String         @id @db.VarChar(3)
  nama         String         @unique
  createdBy    String         @map("created_by")
  createdAt    DateTime       @default(now()) @map("created_at")
  updatedBy    String         @map("updated_by")
  updatedAt    DateTime       @updatedAt @map("updated_at")
  levelJabatan LevelJabatan[]

  @@map("jabatan")
}

model JabatanKemenag {
  id          String   @id @default(uuid()) @db.Uuid
  nama        String?
  noSk        String?  @map("no_sk")
  tmt         DateTime @db.Date
  unitKerja   String?  @map("unit_kerja")
  pegawaiId   String   @map("pegawai_id") @db.VarChar(18)
  bidangStudi String?  @map("bidang_studi")
  createdAt   DateTime @default(now()) @map("created_at")
  pegawai     Pegawai  @relation(fields: [pegawaiId], references: [id])

  @@map("jabatan_kemenag")
}

model StrukturJabatan {
  id                String           @id @default(uuid()) @db.Uuid
  levelJabatanId    String           @map("level_id") @db.Uuid
  sublevelJabatanId String?          @map("sublevel_id") @db.Uuid
  gradeId           String?          @map("grade_id") @db.VarChar(3)
  createdBy         String           @map("created_by")
  createdAt         DateTime         @default(now()) @map("created_at")
  updatedBy         String           @map("updated_by")
  updatedAt         DateTime         @updatedAt @map("updated_at")
  pegawai           Pegawai[]
  gradeRemun        GradeRemun?      @relation(fields: [gradeId], references: [id])
  levelJabatan      LevelJabatan     @relation(fields: [levelJabatanId], references: [id])
  sublevelJabatan   SublevelJabatan? @relation(fields: [sublevelJabatanId], references: [id])

  @@map("struktur_jabatan")
}

model LevelJabatan {
  id              String            @id @default(uuid()) @db.Uuid
  nama            String            @unique @db.VarChar(50)
  createdBy       String            @map("created_by")
  createdAt       DateTime          @default(now()) @map("created_at")
  updatedBy       String            @map("updated_by")
  updatedAt       DateTime          @updatedAt @map("updated_at")
  jabatanId       String            @map("jabatan_id") @db.VarChar(3)
  ssoRoleCode     String            @map("sso_role_code") @db.VarChar(4)
  jabatan         Jabatan           @relation(fields: [jabatanId], references: [id])
  ssoRole         SsoRole           @relation(fields: [ssoRoleCode], references: [code])
  strukturJabatan StrukturJabatan[]

  @@map("level_jabatan")
}

model Pangkat {
  id            String   @id @default(uuid()) @db.Uuid
  nama          String?
  golonganRuang String?  @map("gol_ruang")
  noSk          String?  @map("no_sk")
  tmt           DateTime @db.Date
  ket           String?
  pegawaiId     String   @map("pegawai_id") @db.VarChar(18)
  createdAt     DateTime @default(now()) @map("created_at")
  pegawai       Pegawai  @relation(fields: [pegawaiId], references: [id])

  @@map("pangkat")
}

model Pegawai {
  id                String             @id @db.VarChar(18)
  nipLama           String?            @map("nip_lama") @db.VarChar(20)
  nama              String
  agama             String?
  tempatLahir       String?            @map("tempat_lahir")
  tglLahir          DateTime?          @map("tgl_lahir") @db.Date
  jenisKelamin      GenderType?        @map("jenis_kelamin")
  createdAt         DateTime           @default(now()) @map("created_at")
  updatedAt         DateTime           @updatedAt @map("updated_at")
  noHp              String?            @map("no_hp") @db.VarChar(50)
  emailPribadi      String?            @map("email_pribadi")
  alamatKota        String?            @map("alamat_kota")
  alamatProv        String?            @map("alamat_prov")
  alamatKodepos     String?            @map("alamat_kodepos") @db.VarChar(5)
  createdBy         String             @map("created_by")
  updatedBy         String             @map("updated_by")
  unitGajiId        String?            @map("unit_gaji_id") @db.VarChar(5)
  emailUinar        String?            @map("email_uinar")
  tmtPensiun        DateTime?          @map("tmt_pensiun") @db.Date
  tmtKgbYad         DateTime?          @map("tmt_kgb_yad") @db.Date
  tmtPangkatYad     DateTime?          @map("tmt_pangkat_yad") @db.Date
  statusAktifId     Int                @map("status_aktif_id") @db.SmallInt
  statusPegawaiId   Int                @map("status_peg_id") @db.SmallInt
  statusKawin       String?            @map("status_kawin")
  tmtCpns           DateTime?          @map("tmt_cpns") @db.Date
  jenisJabatan      JenisJabatanType?  @map("jenis_jabatan")
  unitRemunId       String?            @map("unit_remun_id") @db.VarChar(5)
  strukturJabatanId String?            @map("struktur_jabatan_id") @db.Uuid
  nik               String?            @map("nik") @db.VarChar(16)
  nuptk             String?            @db.VarChar(16)
  alamatDesc1       String?            @map("alamat_desc_1")
  alamatDesc2       String?            @map("alamat_desc_2")
  dosen             Dosen?
  jabatanKemenag    JabatanKemenag[]
  pangkat           Pangkat[]
  statusAktif       StatusAktif        @relation(fields: [statusAktifId], references: [id])
  statusPegawai     StatusPegawai      @relation(fields: [statusPegawaiId], references: [id])
  strukturJabatan   StrukturJabatan?   @relation(fields: [strukturJabatanId], references: [id], onDelete: Restrict)
  unitGaji          UnitGaji?          @relation("UnitGajiPegawai", fields: [unitGajiId], references: [id])
  unitRemun         UnitGaji?          @relation("UnitRemunPegawai", fields: [unitRemunId], references: [id])
  pendidikan        Pendidikan[]
  unitKerjaPegawai  UnitKerjaPegawai[]

  @@map("pegawai")
}

model Pendidikan {
  id            String   @id @default(uuid()) @db.Uuid
  namaSekolah   String?  @map("nama_sekolah")
  fakultas      String?
  jurusan       String?
  tahunLulus    Int      @map("tahun_lulus") @db.SmallInt
  jenjang       String?
  lokasiSekolah String?  @map("lokasi_sekolah")
  akta          String?
  pegawaiId     String   @map("pegawai_id") @db.VarChar(18)
  createdAt     DateTime @default(now()) @map("created_at")
  pegawai       Pegawai  @relation(fields: [pegawaiId], references: [id])

  @@map("pendidikan")
}

model Posisi {
  id                 String               @id @db.VarChar(7)
  nama               String               @unique
  kategori           Int                  @db.SmallInt
  createdBy          String               @map("created_by")
  createdAt          DateTime             @default(now()) @map("created_at")
  updatedBy          String               @map("updated_by")
  updatedAt          DateTime             @updatedAt @map("updated_at")
  strukturOrganisasi StrukturOrganisasi[]

  @@map("posisi")
}

model Prodi {
  id         String   @id @default(uuid()) @db.Uuid
  nama       String
  fakultasId String   @map("fakultas_id") @db.VarChar(5)
  createdBy  String   @map("created_by")
  createdAt  DateTime @default(now()) @map("created_at")
  updatedBy  String   @map("updated_by")
  updatedAt  DateTime @updatedAt @map("updated_at")
  dosen      Dosen[]
  fakultas   Fakultas @relation(fields: [fakultasId], references: [id])

  @@unique([nama, fakultasId])
  @@map("prodi")
}

model StatusAktif {
  id         Int       @id @default(autoincrement()) @db.SmallInt
  nama       String    @unique
  ssoEnabled Boolean   @map("sso_enabled")
  isActive   Boolean   @default(false) @map("is_active")
  createdAt  DateTime  @default(now()) @map("created_at")
  updatedAt  DateTime  @updatedAt @map("updated_at")
  pegawai    Pegawai[]

  @@map("status_aktif")
}

model StatusPegawai {
  id          Int       @id @db.SmallInt
  nama        String    @unique
  description String
  isSync      Boolean   @map("is_sync")
  pegawai     Pegawai[]

  @@map("status_pegawai")
}

model SubbagUnitKerja {
  id                 String               @id @default(uuid()) @db.Uuid
  nama               String               @unique
  createdBy          String               @map("created_by")
  createdAt          DateTime             @default(now()) @map("created_at")
  updatedBy          String               @map("updated_by")
  updatedAt          DateTime             @updatedAt @map("updated_at")
  strukturOrganisasi StrukturOrganisasi[]

  @@map("subbag_uker")
}

model SublevelJabatan {
  id              String            @id @default(uuid()) @db.Uuid
  nama            String            @unique
  createdBy       String            @map("created_by")
  createdAt       DateTime          @default(now()) @map("created_at")
  updatedBy       String            @map("updated_by")
  updatedAt       DateTime          @updatedAt @map("updated_at")
  strukturJabatan StrukturJabatan[]

  @@map("sublevel_jabatan")
}

model UnitGaji {
  id               String    @id @db.VarChar(5)
  nama             String    @unique
  createdBy        String    @map("created_by")
  createdAt        DateTime  @default(now()) @map("created_at")
  updatedBy        String    @map("updated_by")
  updatedAt        DateTime  @updatedAt @map("updated_at")
  kodeAnakSatker   String    @unique @map("kode_anak_satker") @db.Char(2)
  unitGajiPegawai  Pegawai[] @relation("UnitGajiPegawai")
  unitRemunPegawai Pegawai[] @relation("UnitRemunPegawai")

  @@map("unit_gaji")
}

model UnitKerja {
  id                 String               @id @db.VarChar(5)
  nama               String               @unique
  createdBy          String               @map("created_by")
  createdAt          DateTime             @default(now()) @map("created_at")
  updatedBy          String               @map("updated_by")
  updatedAt          DateTime             @updatedAt @map("updated_at")
  strukturOrganisasi StrukturOrganisasi[]

  @@map("unit_kerja")
}

model UnitKerjaPegawai {
  pegawaiId            String             @map("pegawai_id") @db.VarChar(18)
  strukturOrganisasiId String             @map("struktur_org_id") @db.Uuid
  isSecondary          Boolean            @default(false) @map("is_secondary")
  createdBy            String             @map("created_by")
  createdAt            DateTime           @default(now()) @map("created_at")
  updatedBy            String             @map("updated_by")
  updatedAt            DateTime           @updatedAt @map("updated_at")
  pegawai              Pegawai            @relation(fields: [pegawaiId], references: [id])
  strukturOrganisasi   StrukturOrganisasi @relation(fields: [strukturOrganisasiId], references: [id])

  @@id([strukturOrganisasiId, pegawaiId])
  @@map("unitkerja_pegawai")
}

model StrukturOrganisasi {
  id               String             @id @default(uuid()) @db.Uuid
  unitKerjaId      String?            @map("uker_id") @db.VarChar(5)
  bagianId         String?            @map("bag_id") @db.Uuid
  subbagId         String?            @map("subbag_id") @db.Uuid
  posisiId         String             @map("posisi_id") @db.VarChar(7)
  gradeId          String?            @map("grade_id") @db.VarChar(3)
  createdBy        String             @map("created_by")
  createdAt        DateTime           @default(now()) @map("created_at")
  updatedBy        String             @map("updated_by")
  updatedAt        DateTime           @updatedAt @map("updated_at")
  bagianUnitKerja  BagianUnitKerja?   @relation(fields: [bagianId], references: [id])
  gradeRemun       GradeRemun?        @relation(fields: [gradeId], references: [id])
  posisi           Posisi             @relation(fields: [posisiId], references: [id])
  subbagUnitKerja  SubbagUnitKerja?   @relation(fields: [subbagId], references: [id])
  unitKerja        UnitKerja?         @relation(fields: [unitKerjaId], references: [id])
  unitKerjaPegawai UnitKerjaPegawai[]

  @@map("struktur_org")
}

model SsoRole {
  code         String         @id @db.VarChar(4)
  description  String
  LevelJabatan LevelJabatan[]

  @@map("sso_role")
}

model Consumer {
  id  String @id @db.VarChar(12)
  key String

  @@map("consumer")
}

enum GenderType {
  L
  P

  @@map("gender_enum")
}

enum JenisJabatanType {
  DT
  DS
  Tendik

  @@map("jenis_jabatan_enum")
}
